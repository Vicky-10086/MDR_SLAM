<launch>
    <param name="/use_sim_time" value="true"/>

    <arg name="bag_file"             default="/root/catkin_ws/data/Euroc/V1_01_easy.bag"/>
    <arg name="ground_truth_file"    default="/root/catkin_ws/data/Euroc/V101_orb.txt"/>
    <arg name="left_cam_info_yaml"   default="/root/catkin_ws/data/Euroc/left_cam.yaml"/>
    <arg name="right_cam_info_yaml"  default="/root/catkin_ws/data/Euroc/right_cam.yaml"/>

    <node pkg="rosbag" type="play" name="player" output="screen"
          args="--pause --clock $(arg bag_file)"/>

    <node name="camera_info_publisher" pkg="my_scripts" type="yaml_to_camerainfo.py" output="screen">
        <param name="left_camera_yaml" value="$(arg left_cam_info_yaml)"/>
        <param name="right_camera_yaml" value="$(arg right_cam_info_yaml)"/>
    </node>

    <node name="ground_truth_publisher" pkg="pointcloud_mapping" type="pose_publisher.py" output="screen"> 
        <param name="pose_file" value="$(arg ground_truth_file)"/> 
        <param name="rate" value="20.0"/>
        <param name="parent_frame" value="map"/>
        <param name="child_frame" value="body"/>
        <param name="use_sim_time" value="$(arg use_sim_time)"/>
    </node>

    <node pkg="tf" type="static_transform_publisher" name="body_to_cam0_broadcaster"
          args="0.0148655429818 0.0216401454975 0.00283683617911 -1.5707963 0 -1.5707963 body cam0 100" />
    <node pkg="tf" type="static_transform_publisher" name="body_to_cam1_broadcaster"
          args="-0.0963333334271 0.0216401454975 0.00283683617911 -1.5707963 0 -1.5707963 body cam1 100" />

    <node name="elas" pkg="elas_ros" type="elas_ros" output="screen">
        <remap from="stereo/left/image"       to="/cam0/image_raw"/>
        <remap from="stereo/right/image"      to="/cam1/image_raw"/>
        <remap from="stereo/left/camera_info"  to="/camera/left/camera_info"/>
        <remap from="stereo/right/camera_info" to="/camera/right/camera_info"/>
        
        <param name="postprocess_only_left" type="bool" value="true"/>
    </node>
    
    </launch>
